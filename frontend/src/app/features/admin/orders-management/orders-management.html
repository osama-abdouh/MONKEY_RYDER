<div class="order-page">
  <div class="header"></div>
  <div class="order-table">
    @if(loading){
    <div>Caricamento ordini...</div>
    } @else if(error){
    <div class="error">{{ error }}</div>
    } @else if(orders.length === 0){
    <div>Nessun ordine trovato.</div>
    } @else {
    <div class="table-wrapper">
      <table>
        <thead>
          <tr>
            <th>ID Ordine</th>
            <th>ID Utente</th>
            <th>Nome</th>
            <th>Email</th>
            <th>Prezzo</th>
            <th>Data</th>
            <th>Pagamento</th>
            <th>Azioni</th>
          </tr>
        </thead>
        <tbody>
          @for(order of orders; track order.id_ordine) {
          <tr>
            <td>{{ order.id_ordine }}</td>
            <td>{{ order.user_id }}</td>
            <td>{{ order.first_name }} {{ order.last_name }}</td>
            <td>{{ order.email }}</td>
            <td>â‚¬{{ order.prezzo }}</td>
            <td>{{ order.datas | date : 'dd/MM/yyyy HH:mm' }}</td>
            <td>
              <span class="payment-method">{{ order.payment_provider || 'N/A' }}</span>
              <br />
              <span class="payment-status" [class]="'status-' + order.payment_status">
                {{ order.payment_status || 'N/A' }}
              </span>
            </td>
            <td class="actions-cell">
              @if(canAdvance(order)) {
              <button (click)="advanceStatus(order)">Avanza Stato</button>
              }
            </td>
          </tr>
          }
        </tbody>
      </table>
    </div>
    }
    <!-- Paginazione 
    @if(totalPages > 1){
      <div class="pagination">
        <button (click)="goToPage(currentPage - 1)" [disabled]="currentPage === 1">Prev</button>
        @for(p of pages; track p) {
          <button (click)="goToPage(p)" [class.active]="currentPage === p">{{ p }}</button>
        }
        <button (click)="goToPage(currentPage + 1)" [disabled]="currentPage === totalPages">Next</button>
      </div>
    }-->
  </div>
</div>
