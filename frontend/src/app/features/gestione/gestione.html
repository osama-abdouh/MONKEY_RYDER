<div class="gestione">
	<button class="card-button customers-card" routerLink="/modifiche" [class.selected]="selected">
			<div class="card-header" style="width:100%; display:flex; justify-content:space-between; align-items:center; gap:12px;">
				<div>
					<h2 style="margin:0">Customers</h2>
					<div class="muted" style="font-size:13px">Gestisci gli utenti registrati del sistema</div>
				</div>
					<div style="display:flex; gap:8px; align-items:center">
						<div class="muted" style="font-size:13px">Totale: <strong>{{ users.length || 0 }}</strong></div>
					</div>
			</div>

			<div style="margin-top:12px; width:100%">
				<div *ngIf="loading" class="muted">Caricamento utenti...</div>
				<div *ngIf="error" class="error muted">{{ error }}</div>

				<table *ngIf="users?.length; else noUsers" class="customers-table">
					<thead>
						<tr>
							<th>First name</th>
							<th>Last name</th>
							<th>Email</th>
						</tr>
					</thead>
					<tbody>
						<tr *ngFor="let u of users">
							<td>{{u.first_name}}</td>
							<td>{{u.last_name}}</td>
							<td>{{u.email}}</td>
						</tr>
					</tbody>
				</table>
				<ng-template #noUsers>
					<p class="muted">No users found for this role.</p>
				</ng-template>
			</div>
		</button>

	
	<button class="card-button max-order-card" routerLink="/modifiche">
		<div class="max-order-header centered">
			<h2>Highest Order</h2>
			<div class="muted">Valore massimo registrato</div>
			<div class="max-order-stat centered-stat">
				<div class="amount">{{ maxOrderResult?.max_order ? ('‚Ç¨' + (maxOrderResult?.max_order | number:'1.2-2')) : '‚Äî' }}</div>
				<div class="customer">{{ maxOrderResult?.first_name || '-' }} {{ maxOrderResult?.last_name || '' }}</div>
			</div>
		</div>

		<div class="max-order-body">
			<div *ngIf="!maxOrderResult" class="muted small">Clicca per caricare l'ordine pi√π alto</div>

			<div *ngIf="recentOrders && recentOrders.length" class="recent-orders">
				<div class="section-title">Ordini recenti</div>
				<ul>
					<li *ngFor="let o of recentOrders" class="recent-item">
						<span class="ro-id">#{{ o.id_ordine }}</span>
						<span class="ro-price">{{ o.price ? ('‚Ç¨' + (o.price | number:'1.2-2')) : 'N/A' }}</span>
						<span class="ro-date">{{ o.datas | date:'short' }}</span>
					</li>
				</ul>
			</div>
		</div>
	</button>

	<button class="card-button least-product-card" routerLink="/modifiche">
		<div class="least-header">
			<h2>Lowest stock</h2>
			<div class="muted">Prodotto con scorte minime</div>
		</div>
		<div class="least-body">
			<ng-container *ngIf="leastProduct; else noLeast">
				<div class="product-stack">
					<span class="qty-badge" [class.low]="leastProduct.quantity !== null && leastProduct.quantity <= 5">{{ leastProduct.quantity !== null ? leastProduct.quantity : 'N/A' }}</span>
					<div class="product-name">{{ leastProduct.name }}</div>
					<div class="product-category">{{ leastProduct.category }}</div>
				</div>
			</ng-container>
			<ng-template #noLeast>
				<p>No product data available.</p>
			</ng-template>
		</div>
	</button>

	<!-- Quick actions box: buttons only (no inputs) -->
	<div class="card-button quick-actions-card">
		<div class="quick-actions-header">
			<h2>Azioni rapide</h2>
			<div class="muted">Operazioni frequenti per la gestione del sistema</div>
		</div>
		<div class="quick-actions">
			<button class="qa-btn primary" routerLink="/modifiche"><span class="qa-icon">Ôºã</span>Nuovo utente</button>
			<button class="qa-btn danger" routerLink="/modifiche"><span class="qa-icon">üóë</span>Elimina ordine</button>
			<button class="qa-btn secondary" routerLink="/modifiche"><span class="qa-icon">üîç</span>Traccia ordine</button>
			<!-- placeholder examples for future actions -->
			<button class="qa-btn" disabled><span class="qa-icon">‚öô</span>Configura</button>
		</div>
	</div>
</div>
